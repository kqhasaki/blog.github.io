<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><script>
            const cachedTheme = localStorage.getItem('theme');
            if (cachedTheme) {
              document.documentElement.dataset.theme = cachedTheme;
            } else {
              const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
              document.documentElement.dataset.theme = preferredTheme;
            }

            const isMacOS = navigator.platform === 'MacIntel'
            if (!isMacOS) {
              document.documentElement.dataset.usrfont = 'non-mac';
            }
            </script><style data-href="/styles.f95955a2b9f32e40562a.css" data-identity="gatsby-global-css">.modal-wrapper{align-items:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:999}.modal-content-wrapper::-webkit-scrollbar{width:0}.modal-content{background:var(--background-color);border:1px solid var(--card-background-border-color);border-radius:1rem;max-width:1080px;min-width:600px;padding:1.5rem;position:relative;width:50vw}.modal-content-wrapper{max-height:70vh;min-height:50vh;overflow-y:auto;width:100%}.modal-closer{cursor:pointer;font-size:1.2rem;position:absolute;right:.8rem;top:.8rem}.modal-closer:hover{color:var(--blue)}@media (max-width:900px){.modal-content{min-width:90%;width:90%}}.post-card-img{background-color:var(--background-color);border-radius:12px;bottom:0;box-shadow:0 0 6px rgba(0,0,0,.15);height:200px;left:50%;-o-object-fit:cover;object-fit:cover;position:absolute;-webkit-transform:translate(-50%) rotate(-8deg);transform:translate(-50%) rotate(-8deg);transition:.2s;width:300px}.img-line{height:120px;margin-bottom:2rem;position:relative}.post-card{align-items:center;border:1px solid var(--card-background-border-color);border-radius:1.5rem;cursor:pointer;display:flex;flex-direction:column;justify-content:center;margin:140px auto 0;max-width:50rem;padding:1.5rem 2rem;position:relative;transition:.2s}.post-card:hover{box-shadow:0 0 1rem var(--card-box-shadow)}.post-card:active{box-shadow:0 0 1.5rem var(--blue)}.post-card:hover .post-card-img{-webkit-transform:translate(-50%) rotate(0deg);transform:translate(-50%) rotate(0deg)}.post-card h2:after{background:var(--blue);content:"";display:block;height:2px;margin-left:auto;margin-right:auto;margin-top:10px;width:60px}.post-card-meta{background-color:var(--card-background-color);border:1px solid var(--card-background-border-color);border-radius:.5rem;font-size:.9rem;font-weight:300;margin:1rem 0 0;padding:5px 10px}@media (max-width:750px){.post-card{border-left:none;border-radius:0;border-right:none;padding:1.5rem .8rem}}.article-navigator{background-color:var(--background-color);border-right:1px solid var(--card-background-border-color);height:100vh;overflow-y:auto;padding:2.5rem 1.2rem 2.5rem 2rem;position:-webkit-sticky;position:sticky;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:20%}.article-navigator::-webkit-scrollbar{width:0}.article-navigator-visible{-webkit-transform:translateX(0)!important;transform:translateX(0)!important}@media (max-width:1100px){.article-navigator{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:var(--background-color-transparent);border:none;box-shadow:0 0 8px rgba(0,0,0,.1);height:100%;left:0;left:auto!important;max-width:400px;padding:0;position:fixed;-webkit-transform:translateX(-100%);transform:translateX(-100%);transition:.3s;width:calc(100% - 80px);z-index:10}.article-navigator h4{font-size:1.2rem!important;margin-top:1rem!important;padding-left:1rem;padding-right:1rem}.article-navigator p{border-bottom:1px solid var(--navigator-border-color);font-size:1rem!important;line-height:2.8rem!important;padding-left:2rem!important;padding-right:2rem!important;transition:background .3s}.article-navigator p:hover{background:var(--navigator-hover-color)}.article-navigator-switch{visibility:visible!important}}.article-navigator h4{font-size:15px;margin-bottom:.5rem;margin-top:1rem}.article-navigator h4:first-child{margin-top:0}.article-navigator-switch{background-color:var(--background-color);border:1px solid var(--card-background-border-color);border-radius:50%;color:var(--font-color);cursor:pointer;font-size:.8rem;height:30px;left:.5rem;line-height:29px;position:fixed;text-align:center;top:4.5rem;visibility:hidden;width:30px;z-index:9}.article-navigator p{cursor:pointer;font-size:14px;margin:0;overflow-x:hidden;padding-left:.5rem;text-overflow:ellipsis;white-space:nowrap;width:100%}.article-navigator p:hover,.highlighted-navigator-item{color:var(--blue)}.item-list{align-items:center;border-left:3px solid var(--blue);display:flex;flex-direction:column;justify-content:center;margin:0 auto 0 1rem}.item-list .item{margin:0;padding:1rem;position:relative;width:100%}.item:before{background-color:var(--blue);border-radius:50%;content:"";height:.8rem;left:-.5rem;position:absolute;top:2rem;transition:.2s;width:.8rem}.item:hover:before{-webkit-transform:scale(1.2);transform:scale(1.2)}.item-list .item-label{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:15px;font-weight:400}.item-list .item-content{padding-top:.5rem}.homepage-title{font-weight:700;margin:2rem 0 1rem}.item a{transition:.3s}.item a:hover{color:var(--font-color-highlight)}.footer{background-color:#212121;color:#efefef;font-family:Lato,Georgia,serif;font-size:15px;height:184px;justify-content:space-evenly;min-width:350px;position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none}.footer,.footer .wrapper{display:flex;flex-direction:row}.footer .wrapper{align-items:center;justify-content:space-around;padding:.5rem;width:100%}.footer .wrapper div{margin:0 8px}.footer h3{font-size:1.6rem;font-weight:lighter;margin-top:8px;width:100%}.footer p{line-height:1.2rem;margin:0;padding:.5rem 0;text-align:center}.footer span{cursor:pointer;font-size:1.6rem;margin-right:12px}.wrapper li{padding:4px 0}.footer span:hover{color:var(--blue)}@media (max-width:750px){.footer .wrapper{flex-direction:column!important;margin-bottom:1rem;width:100%}.base-wrapper,.base-wrapper[name=article-wrapper]{margin-left:auto;margin-right:auto;min-height:100%;padding:2.625rem 0;width:100%}.base-wrapper{margin-top:64px}.not-found-background{aspect-ratio:9/20;user-select:none}}.messager{background-color:var(--background-color);border:1px solid var(--card-background-border-color);border-radius:.5rem;box-shadow:0 0 .8rem var(--card-box-shadow);left:0;margin-left:auto;margin-right:auto;max-width:200px;padding:.5rem 1rem;position:fixed;right:0;text-align:center;top:1rem;-webkit-transform:scale(.2);transform:scale(.2);transition:.2s;z-index:1000}.navbar{background-color:#212121;box-shadow:0 0 1rem rgba(0,0,0,.1);font-family:Lato,Georgia,serif;height:64px;min-width:350px;padding:12px 0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:100%}.navbar nav{align-items:center;display:flex;flex-direction:row;justify-content:space-evenly;max-width:1080px;min-width:375px;width:64%}.nav-link .img-label{font-size:15px;min-width:54px;padding-left:2px}@media (max-width:750px){.navbar{position:absolute;z-index:10}.nav-link .img-label{display:none}}.nav-link{align-items:center;color:#fff;cursor:pointer;display:flex;flex-direction:row;font-size:2.2rem;justify-content:center;margin:0 1rem;min-width:3rem;transition:.2s}.nav-link>img{border-radius:50%;display:inline-block;height:2rem}.nav-link:hover{color:var(--blue);text-decoration:none}.nav-link .link-label{display:block;font-size:16px;text-align:center;width:8rem}.link-active{color:var(--blue)}.game .question{margin:1.5rem 0}.game .question input{-webkit-appearance:none;appearance:none;background:none;border:none;border-bottom:1px solid var(--font-color);color:var(--font-color);display:inline-block;font-weight:700;max-width:120px;outline:none;padding:1px 8px}.game .question button{background:var(--card-background-color);border-radius:4px;color:var(--font-color);cursor:pointer;font-size:12px;margin-left:8px;padding:2px 6px}.game img{aspect-ratio:16/9;border-radius:8px;height:auto;margin-bottom:.5rem;margin-top:1rem;-o-object-fit:cover;object-fit:cover;overflow:hidden;padding:0;width:100%}.game img,.lamp{position:relative}.lamp{--lamp-lightness:60%;--lamp-color:hsl(0deg 0% var(--lamp-lightness));--outline-offset:var(--sp--3);--outline-color:#fff;background-color:transparent;cursor:pointer;height:45px;-webkit-transform:scale(.711);transform:scale(.711);-webkit-transform-style:preserve-3d;transform-style:preserve-3d;width:45px}.lamp>*{display:block}.lamp-base{background-color:var(--lamp-color);border-radius:4px 4px 0 0;bottom:0;box-shadow:inset 0 .5px 2px rgba(0,0,0,.6);height:7px;position:absolute;right:5px;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;width:30px}.lamp-base-down:after{height:0!important}.lamp-base:after{background-color:#fff;border-radius:1px 1px 0 0;content:"";height:6px;left:4px;position:absolute;top:-2px;-webkit-transform:translateZ(-1px);transform:translateZ(-1px);width:6px}.lamp-neck{bottom:5px;right:8px;-webkit-transform:translateZ(-1px) rotate(20deg);transform:translateZ(-1px) rotate(20deg)}.lamp-neck,.lamp-neck:after{background-color:var(--lamp-color);height:20px;position:absolute;width:4px}.lamp-neck:after{content:"";left:-8px;top:-14px;-webkit-transform:rotate(-60deg);transform:rotate(-60deg)}.lamp-head{--lamp-color-light:hsl(0deg 0% calc(var(--lamp-lightness) - 5%));background-image:linear-gradient(to bottom,var(--lamp-color-light) 5%,var(--lamp-color) 90%,var(--lamp-color-light) 5%);border-radius:100px 100px 0 0;box-shadow:0 4px 4px -2px #e6e6e6;height:10px;left:10px;position:absolute;top:4px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-style:preserve-3d;transform-style:preserve-3d;width:20px}.lamp-head:before{background-color:var(--lamp-color);border-radius:50%;display:block;height:6px;right:6px;top:-4px;width:6px px}.lamp-head:after,.lamp-head:before{content:"";position:absolute;-webkit-transform:translateZ(-1px);transform:translateZ(-1px)}.lamp-head:after{background:var(--lamp-head-background);-webkit-clip-path:polygon(30% 0,70% 0,100% 100%,0 100%);clip-path:polygon(30% 0,70% 0,100% 100%,0 100%);height:40px;right:0;top:10px;width:20px}.paginator{font-family:monospace;height:5rem;margin-top:4.5rem;-webkit-user-select:none;-ms-user-select:none;user-select:none}.paginator,.paginator .paginator-item{align-items:center;display:flex;justify-content:center}.paginator .paginator-item{border:1px solid var(--navigator-border-color);border-radius:20px;color:var(--navigator-border-color);cursor:pointer;flex-direction:column;height:40px;margin:0 4px;transition:.3s;width:40px}.paginator .paginator-item:hover{background-color:var(--quote-background-color);color:var(--font-color)}.paginator .paginator-item-active{color:var(--font-color)}.paginator .ellipsis{color:var(--navigator-border-color);display:flex;flex-direction:column;font-size:2rem;height:2.8rem;justify-content:center;width:2.8rem}:root{--deckgo-highlight-code-font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}html[data-theme=dark]{--blue:#02bbff;--background-color:#141414;--background-color-transparent:rgba(0,0,0,.9);--font-color:#dedede;--font-color-header:#fff;--font-color-highlight:#efefef;--btn-color:#333;--card-background-color:#222;--quote-background-color:#242424;--font-color-quote:#bdcbdc;--card-background-border-color:#2a2a2a;--card-box-shadow:#333;--code-font-color:#c678dd;--code-background-color:rgba(0,0,0,.1);--code-border-color:rgba(0,0,0,.02);--code-block-background:#1c1c1c;--navigator-hover-color:hsla(0,0%,100%,.1);--navigator-border-color:#222;--table-border-color:#303030;--lamp-head-background:transparent}html[data-theme=light]{--blue:#02bbff;--background-color:#fff;--background-color-transparent:hsla(0,0%,100%,.9);--font-color:#000;--font-color-header:#3c4043;--btn-color:#fff;--card-background-color:#efefef;--card-background-border-color:#efefef;--quote-background-color:#eaf8ff;--font-color-highlight:#000;--font-color-quote:#555;--card-box-shadow:rgba(0,0,0,.1);--code-font-color:#444;--code-background-color:rgba(255,229,100,.2);--code-border-color:rgba(255,229,100,.2);--code-block-background:#313131;--navigator-hover-color:rgba(0,0,0,.08);--navigator-border-color:#ddd;--table-border-color:#ededed;--lamp-head-background:linear-gradient(hsla(0,0%,100%,.8),hsla(0,0%,100%,.35),hsla(0,0%,100%,.05))}html{background-color:#212121;border:none}html[data-usrfont=non-mac] body{font-family:STSong,sans-serif!important}body{background-color:#212121;color:var(--font-color);font-family:Lato,Georgia,serif}a{color:inherit;text-decoration:none}*{-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;box-sizing:border-box;list-style-type:none;margin:0;padding:0}ol{margin:.7rem 0}ol li{list-style-type:decimal;margin:.6rem 0 .6rem 2rem}p{-webkit-margin-before:1em;-webkit-margin-after:1em;-webkit-margin-start:0;-webkit-margin-end:0;display:block;line-height:1.8;margin-block-end:1em;margin-block-start:1em;margin-bottom:.7rem;margin-inline-end:0;margin-inline-start:0;margin-top:.7rem}::selection{background-color:var(--blue);color:#fff}body{word-wrap:break-word;font-kerning:normal;margin:0;padding:0}header{align-items:center;display:flex;flex-direction:row;justify-content:space-around;padding-bottom:0}header>.route-link{margin:0 1rem}.layout{background-color:var(--background-color);display:flex;flex-direction:row}.article-body .article-cover{aspect-ratio:16/10;border-radius:6px!important;-o-object-fit:contain;object-fit:contain;width:225px!important}.article-body p strong{font-family:sans-serif;font-weight:700}.base-wrapper{margin-left:auto;margin-right:auto;max-width:1080px;min-height:100%;min-width:350px;padding:2.625rem 1.3125rem;width:60%}.article-body .article-title{font-size:2.2rem;font-weight:700;margin-bottom:2rem;margin-top:.5rem;text-align:center}.article-body strong{color:var(--font-color-highlight)}.article-meta{font-size:.9rem;margin:1rem auto;margin-bottom:3rem!important;text-align:center}.article-meta>span{background-color:var(--card-background-color);border-radius:.5rem;font-weight:lighter;padding:.5rem 1rem}.article-body h1,h2,h3{cursor:pointer}.article-body p{font-size:16px;font-weight:400;margin-bottom:1.2rem;margin-top:1.2rem}.article-body h1{color:var(--font-color-header);font-size:2rem;font-weight:700;margin-bottom:1.8rem;margin-top:3.5rem}.article-body h1 code{font-size:2rem}.article-body h2{color:var(--font-color-header);font-size:1.6rem;font-weight:700;margin-bottom:1rem;margin-top:2.5rem}.article-body h2 code{font-size:1.5rem}.article-body h3{color:var(--font-color-header);font-size:1.3rem;font-weight:700;line-height:1.8;margin-bottom:1rem;margin-top:1.8rem}.article-body h3 code{font-size:1.2rem;font-weight:700}.article-body h4{color:var(--font-color-header);font-weight:500;margin-bottom:1rem;margin-top:1.5rem}.article-body h4 code{font-size:1rem}.article-body h1:first-child{border-radius:.5rem}.article-body h1.article-title:before{content:none!important}.article-body h1:before{margin-bottom:.5rem}.article-body h1:before,.article-body h2:before{background:var(--blue);content:"";display:block;height:2px;width:70px}.article-body h2:before{margin-bottom:.3rem}.article-body code{background-color:var(--code-background-color);border:1px solid var(--code-border-color);border-radius:4px;color:var(--code-font-color);font-family:Menlo,Monaco,Consolas,monospace;font-size:15px;margin:0 2px;padding:1px 4px}.article-body blockquote{background-color:var(--quote-background-color);border-left:2px solid var(--blue);border-radius:0 .5rem .5rem 0;color:var(--font-color-quote);margin-top:1rem;padding:1rem}.article-body blockquote code{color:var(--code-font-color)}.article-body .article-cover{border-radius:16px;box-shadow:0 0 1px rgba(0,0,0,.1);margin:18px auto 20px;width:80%}.article-body .article-cover,.article-body img{display:block;min-width:330px;-o-object-fit:cover;object-fit:cover}.article-body img{border-radius:12px;margin:18px auto;width:85%}.article-body ul{margin:.7rem 0}.article-body ul li{list-style-type:disc;margin:.6rem 0 .6rem 2rem}.article-body a{color:#189fff}a:hover{text-decoration:underline}.article-body a:after{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMSIgaGVpZ2h0PSIxMSIgY2xhc3M9InByZWZpeF9faWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+PHBhdGggZmlsbD0iIzE4OWZmZiIgZD0iTTkyNC40MDIgMTAyMy4wNjhILjY4Vjk5LjM0NUg0NjIuNTR2OTguOTFIOTkuNTk3VjkyNC4xNWg3MjUuODk2VjU2MS4yMDdoOTguOTF6Ii8+PHBhdGggZmlsbD0iIzE4OWZmZiIgZD0ibTkzMC44MDUgMjIuOTc3IDY5Ljk2NiA2OS45NjYtNDUzLjQ5MyA0NTMuNDkyLTY5Ljk2NS02OS45MDF6Ii8+PHBhdGggZmlsbD0iIzE4OWZmZiIgZD0iTTEwMjIuNDY0IDMwNC4wM2gtOTguOTE3Vjk5LjM0NUg3MDkuMjMxVi40MjhoMzEzLjIzM3oiLz48L3N2Zz4=);padding-left:2px}.article-body table{word-wrap:normal;border-collapse:collapse;table-layout:fixed;width:100%}th{background-color:rgba(0,0,0,.06);text-align:center}td{background-color:hsla(0,0%,100%,.01);font-weight:300}table,td,th{border:1px solid var(--table-border-color);overflow:auto;padding:.5rem}.theme-changer{border-radius:50%;bottom:1rem;cursor:pointer;position:fixed;right:1rem}.theme-changer img{background-color:var(--background-color);border:1px solid var(--card-background-border-color);border-radius:50%;height:30px;padding:6px;width:30px}.iframe-wrapper{aspect-ratio:16/9;border-radius:8px;height:auto;margin-bottom:.5rem;margin-top:1rem;overflow:hidden;padding:0;position:relative;width:100%}.iframe-wrapper .loader{color:#dcdcdc;font-family:sans-serif;font-size:2.5rem;left:50%;position:absolute;text-align:center;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-user-select:none;-ms-user-select:none;user-select:none}iframe{aspect-ratio:16/9;height:auto;width:100%}deckgo-highlight-code{background-color:var(--code-block-background);border-radius:.5rem;box-shadow:none!important;cursor:pointer;font-size:14px;margin-top:1rem;position:relative}.not-found-background,deckgo-highlight-code{-webkit-user-select:none;-ms-user-select:none;user-select:none}.not-found-background{aspect-ratio:16/9;width:100%}.not-found-background h1{background-color:rgba(0,0,0,.8);border-radius:8px;box-shadow:0 0 3rem rgba(0,0,0,.9);color:#ef3939;margin-top:4rem;padding:8px;text-align:center}.foot-post-navigator{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:2rem;padding:0 1rem}.foot-post-navigator button{background:none;color:var(--font-color);cursor:pointer;display:flex;flex-direction:column;font-family:inherit!important;margin:0 4px;max-width:45%;text-decoration:none;transition:.2s}.foot-post-navigator button.next{align-items:flex-end}.foot-post-navigator button div{margin-bottom:6px}.foot-post-navigator button span{font-size:15px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.foot-post-navigator button.to-non-tech:hover{color:gold}.foot-post-navigator button:hover{color:var(--blue)}@media (min-width:900px){deckgo-highlight-code:after{content:"双击复制";font-size:11px;height:2rem;opacity:0;position:absolute;right:1rem;text-align:center;top:1rem;transition:.4s;width:4rem}deckgo-highlight-code:hover:after{opacity:1}}@media (max-width:1100px){.base-wrapper[name=article-wrapper]{margin-left:0;padding-left:0;padding-right:0;width:75%}.base-wrapper{width:80%}.article-body h1,.article-body h2,.article-body h3,.article-body p{padding-left:.8rem;padding-right:.8rem}.article-body li{padding-right:.8rem}.article-body li p{margin:0}.article-body img,.iframe-wrapper,blockquote,deckgo-highlight-code{border-radius:0!important}.article-body img{width:100%}}@media (max-width:750px){.base-wrapper,.base-wrapper[name=article-wrapper]{margin-left:auto;margin-right:auto;min-height:100%;padding:2.625rem 0;width:100%}.base-wrapper{margin-top:64px}.not-found-background{aspect-ratio:9/20;-webkit-user-select:none;-ms-user-select:none;user-select:none}}.avatar{align-items:center;display:flex;flex-direction:row;height:8rem;justify-content:center}.avatar>img{border-radius:50%;box-shadow:0 0 4px rgba(0,0,0,.1);max-height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center center;object-position:center center;opacity:1;padding:.5rem;transition:none 0s ease 0s}.progresser{background-color:var(--background-color);border:1px solid var(--card-background-border-color);border-radius:15px 0 0 15px;border-right:none;bottom:4rem;color:var(--font-color);cursor:pointer;font-family:Courier New,Courier,monospace;font-size:13px;font-weight:lighter;height:30px;line-height:30px;position:fixed;right:0;text-align:center;transition:.2s;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:48px;z-index:9}.progresser:after{background-color:var(--quote-background-color);border-radius:15px 0 0 15px;content:"";opacity:0;transition:.2s}.progresser:after,.progresser:hover:after{bottom:0;left:0;position:absolute;right:0;top:0}.progresser:hover:after{content:"up";opacity:1}.progresser-hide{-webkit-transform:translateX(100%);transform:translateX(100%)}.table-of-content{background-color:var(--background-color);border-left:1px solid var(--card-background-border-color);height:100vh;position:-webkit-sticky;position:sticky;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:20%}.table-of-content-main{height:100%;overflow-y:auto;padding:2.5rem 1.2rem 3rem}.table-of-content-main::-webkit-scrollbar{width:0}.table-of-content-switch{display:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.table-of-content-visible{-webkit-transform:translateX(0)!important;transform:translateX(0)!important}@media (max-width:1100px){.table-of-content{width:25%}}@media (max-width:750px){.table-of-content{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:var(--background-color-transparent);border:none;box-shadow:0 0 8px rgba(0,0,0,.1);height:100%;max-width:400px;padding:0;position:fixed;right:0;-webkit-transform:translateX(100%);transform:translateX(100%);transition:.3s;width:calc(100% - 80px);z-index:11}p.header-level-h1:first-child{padding-left:14px!important;-webkit-transform:translateX(0);transform:translateX(0)}.table-of-content-main{padding:2rem 0}.table-of-content h4{font-size:1.2rem!important;margin-top:1rem!important;padding-left:1rem;padding-right:1rem}.table-of-content p{border-bottom:1px solid var(--navigator-border-color);font-size:1rem!important;line-height:2.8rem!important;margin-top:0!important;padding-right:2rem!important;transition:background .3s}.table-of-content p.header-level-h1{font-weight:700;margin-top:.8rem;padding-left:2rem}.table-of-content p.header-level-h2{font-size:15px;margin-top:.4rem;padding-left:3rem}.table-of-content .header-level-h3{font-size:15px;margin-top:.2rem;padding-left:4rem}.table-of-content p:hover{background:var(--navigator-hover-color)}.table-of-content-switch{background-color:blue;background-color:var(--background-color);border:1px solid var(--card-background-border-color);border-radius:50%;color:var(--font-color);cursor:pointer;display:block;font-size:.8rem;height:30px;line-height:30px;position:fixed;right:.5rem;text-align:center;top:4.5rem;width:30px;z-index:8}}.table-of-content::-webkit-scrollbar{display:none}.table-of-content p{cursor:pointer;margin:0;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.table-of-content .topHeader{color:var(--blue)!important}.table-of-content p:hover{color:var(--blue)}p.header-level-h1:first-child{border-left:2px solid var(--blue);padding-left:4px;-webkit-transform:translateX(-8px);transform:translateX(-8px)}p.header-level-h1{font-size:15px;font-weight:700;margin-top:.8rem}p.header-level-h2{font-size:14px;margin-top:.4rem;padding-left:1rem}p.header-level-h3{font-size:14px;margin-top:.2rem;padding-left:2rem}</style><meta name="generator" content="Gatsby 4.4.0"/><link rel="icon" href="/favicon-32x32.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=d58da36a3a1345ad1c6bcba6e7d0c6de"/><link as="script" rel="preload" href="/webpack-runtime-768047f354bc004d166d.js"/><link as="script" rel="preload" href="/framework-f27b074ecebec0f1dbc4.js"/><link as="script" rel="preload" href="/app-cb8cf455a629701e7063.js"/><link as="script" rel="preload" href="/cb1608f2-cc8649749445c1088879.js"/><link as="script" rel="preload" href="/commons-62d414c82abc9b4aa190.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-9d4b15df0cdbe7fceee1.js"/><link as="fetch" rel="preload" href="/page-data/articles/javascript-algorithm-and-data-structure/javascript-algorithm-series08/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2757060725.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3605573801.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><title>Louis K - Software Engineer</title><header class="navbar"><nav><div class="nav-link"><img alt="avatar" src="/static/avatar-05f3b9b1e1ce151053fb8a66dbc70489.png"/><span class="img-label">Louis K</span></div><a class="nav-link" href="/"><span class="link-label">Tech</span></a><a class="nav-link" href="/non-tech/"><span class="link-label">Ramble</span></a><div class="nav-link"><button class="lamp" aria-pressed="true" type="button"><span class="lamp-base"></span><span class="lamp-neck"></span><span class="lamp-head"></span></button></div></nav></header><main class="layout"><div class="article-navigator-switch"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="list" class="svg-inline--fa fa-list " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M88 48C101.3 48 112 58.75 112 72V120C112 133.3 101.3 144 88 144H40C26.75 144 16 133.3 16 120V72C16 58.75 26.75 48 40 48H88zM480 64C497.7 64 512 78.33 512 96C512 113.7 497.7 128 480 128H192C174.3 128 160 113.7 160 96C160 78.33 174.3 64 192 64H480zM480 224C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H192C174.3 288 160 273.7 160 256C160 238.3 174.3 224 192 224H480zM480 384C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H192C174.3 448 160 433.7 160 416C160 398.3 174.3 384 192 384H480zM16 232C16 218.7 26.75 208 40 208H88C101.3 208 112 218.7 112 232V280C112 293.3 101.3 304 88 304H40C26.75 304 16 293.3 16 280V232zM88 368C101.3 368 112 378.7 112 392V440C112 453.3 101.3 464 88 464H40C26.75 464 16 453.3 16 440V392C16 378.7 26.75 368 40 368H88z"></path></svg></div><div class="article-navigator"><h4>electron</h4><p title="electron中的进程模型" class="">electron中的进程模型</p><h4>前端杂谈</h4><p title="“关于Unicode和字符集，你至少应该了解这些”" class="">“关于Unicode和字符集，你至少应该了解这些”</p><p title="跨源资源共享（CORS）" class="">跨源资源共享（CORS）</p><p title="利用ESLint、Prettier统一团队内代码风格" class="">利用ESLint、Prettier统一团队内代码风格</p><p title="V8引擎中的对象属性访问" class="">V8引擎中的对象属性访问</p><p title="关于no-cors的误区" class="">关于no-cors的误区</p><p title="地图工具中的线条吸附——一个简单方案" class="">地图工具中的线条吸附——一个简单方案</p><p title="渲染页面：浏览器的工作原理" class="">渲染页面：浏览器的工作原理</p><p title="React diffing算法" class="">React diffing算法</p><p title="Vercel简介 静态博客部署" class="">Vercel简介 静态博客部署</p><h4>JavaScript数据结构和算法</h4><p title="（八）字典和散列表" class="highlighted-navigator-item">（八）字典和散列表</p><p title="（十）树" class="">（十）树</p><p title="（十四）算法设计与技巧" class="">（十四）算法设计与技巧</p><h4>JavaScript高级程序设计</h4><p title="（一）什么是JavaScript？" class="">（一）什么是JavaScript？</p><p title="（二）HTML中的JavaScript" class="">（二）HTML中的JavaScript</p><p title="（三）JavaScript语言基础" class="">（三）JavaScript语言基础</p><p title="（四）变量、作用域与内存" class="">（四）变量、作用域与内存</p><p title="（五）基本引用类型" class="">（五）基本引用类型</p><p title="（六）集合引用类型" class="">（六）集合引用类型</p><p title="（七）迭代器与生成器" class="">（七）迭代器与生成器</p><p title="（十一）期约与异步函数" class="">（十一）期约与异步函数</p><p title="（十四）DOM" class="">（十四）DOM</p><p title="（十五）DOM扩展" class="">（十五）DOM扩展</p><p title="（十七）事件" class="">（十七）事件</p><p title="（二十）JavaScript API" class="">（二十）JavaScript API</p><p title="（二十三）JSON" class="">（二十三）JSON</p><p title="（二十四）网络请求与远程资源" class="">（二十四）网络请求与远程资源</p><p title="（二十五）客户端存储" class="">（二十五）客户端存储</p><p title="（二十六）模块" class="">（二十六）模块</p></div><main class="base-wrapper" name="article-wrapper"><main><div class="progresser">0<!-- -->%</div><article class="article-body" style="margin-bottom:4rem"><img alt="https://tva1.sinaimg.cn/large/e6c9d24egy1h1sw6q5z09j20zk0k0dgk.jpg" src="https://tva1.sinaimg.cn/large/e6c9d24egy1h1sw6q5z09j20zk0k0dgk.jpg" class="article-cover"/><h1 class="article-title">（八）字典和散列表</h1><p class="article-meta"><span><span role="img" aria-label="field-time" class="anticon anticon-field-time"><svg viewBox="64 64 896 896" focusable="false" data-icon="field-time" width="1em" height="1em" fill="currentColor" aria-hidden="true"><defs><style></style></defs><path d="M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"></path><path d="M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"></path></svg></span> <!-- -->2022-05-01<!-- --> | <span role="img" aria-label="read" class="anticon anticon-read"><svg viewBox="64 64 896 896" focusable="false" data-icon="read" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"></path></svg></span> <!-- -->5000<!-- -->words <!-- -->18<!-- -->min</span></p><p>第 7 章中，我们学习了 JavaScript 中的集合。本章会继续学习使用字典和散列表来存储唯一的值（不重复的值）的数据结构。</p><p>在集合中，我们感兴趣的是每个值本身，并把它当作主要元素。在字典（或映射）中，我们使用键/值对（key/value）的形式来存储数据。在散列表中也是一样（也是以键/值对形式来存储数据）。但是两种数据结构的实现方式略有不同，例如字典中的每个键只能有一个值。</p><p>本章内容包括：字典数据结构、散列表数据结构、处理散列表中的冲突、ES6 中的<code>Map</code>、<code>WeakMap</code>和<code>WeakSet</code>类。</p><iframe width="560" height="315" src="https://www.youtube.com/embed/KyUTuwz_b7Q" title="哈希表" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><h1>字典</h1><p>我们已经知道，集合表示一组互不相同的元素（不重复的元素）。在字典中，存储的是键/值对，其中键名是用来查询特定元素的。字典和集合很相似，集合以值/值的形式存储元素，字典则以键/值的形式来存储元素。字典也称作<strong>映射</strong>、<strong>符号表</strong>或<strong>关联数组</strong>。</p><h2>创建字典类</h2><p>与<code>Set</code>类相似，ES6 中同样包含了一个<code>Map</code>类的实现，即我们所说的字典。</p><p>本章要实现的类就是以 ES6 中的<code>Map</code>类的实现为基础的。我们会发现它和<code>Set</code>类很相似，但不同于存储值/值对的形式，我们要存储的是键/值对。</p><p>以下是我们的<code>Dictionary</code>类的骨架：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">import { defaultToString } from &#x27;../util&#x27;

export default class Dictionary {
  constructor(toStrFn = defaultToString) {
    this.toStrFn = toStrFn
    this.table = {}
  }
}</code>
        </deckgo-highlight-code><p>与<code>Set</code>类类似，我们将在一个<code>Object</code>的实例而不是数组中存储字典中的元素（<code>table</code>属性）。我们会将键/值对保存为<code>table[key] = { key, value }</code>。</p><p>在字典中，理想的情况是用字符串作为键名，值可以是任何类型。但是由于 JavaScript 不是强类型语言，我们不能保证键一定是字符串。我们需要把所有作为键名传入的对象转化为字符，使得从<code>Dictionary</code>类中搜索和获取值更为简单。要实现此功能，我们需要一个将<code>key</code>转化为字符串的函数。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">// defaultToString函数声明
export function defaultToString(item) {
  if (item === null) {
    return &#x27;NULL&#x27;
  } else if (item === undefined) {
    return &#x27;UNDEFINED&#x27;
  } else if (typeof item === &#x27;string&#x27; || item instanceof String) {
    return `${item}`
  }

  return item.toString()
}</code>
        </deckgo-highlight-code><blockquote><p>注意，如果<code>item</code>变量是一个对象的话，它需要实现<code>toString</code>方法，否则会导致出现异常的输出结果，如<code>[object object]</code>。这对用户是不友好的。</p></blockquote><p>如果键（<code>item</code>）是一个字符串，那么我们直接返回它，否则要调用<code>item</code>的<code>toString</code>方法。</p><p>然后，我们需要声明一些映射/字典所能使用的方法。</p><ul><li><p><code>set(key, value)</code>：向字典中添加新元素。如果<code>key</code>已经存在，那么已存在的<code>value</code>会被新的值覆盖。</p></li><li><p><code>remove(key)</code>：如果使用键值作为参数来从字典中移除键值对应的数据值。</p></li><li><p><code>hasKey(key)</code>：如果某个键值存在于该字典中，返回<code>true</code>，否则返回<code>false</code>。</p></li><li><p><code>get(key)</code>：通过以键值作为参数查找特定的数值并返回。</p></li><li><p><code>clear()</code>：删除该字典中的所有值。</p></li><li><p><code>size()</code>：返回字典中所包含值的数量。与数组的<code>length</code>属性类似。</p></li><li><p><code>isEmpty()</code>：在<code>size</code>等于 0 时返回<code>true</code>，否则返回<code>false</code>。</p></li><li><p><code>keys()</code>：将字典所包含的所有键名以数组形式返回。</p></li><li><p><code>values()</code>：将字典所包含的所有值以数组形式返回。</p></li><li><p><code>keyValues()</code>：将字典中所有键/值对返回。</p></li><li><p><code>forEach(callbackFn)</code>：迭代字典中所有的键值对。<code>callbackFn</code>有两个参数：<code>key</code>和<code>value</code>。该方法可以在回调函数返回<code>false</code>时被中止（和<code>Array</code>类中的<code>every</code>方法相似）。</p></li></ul><h3>检测一个键是否存在于字典中</h3><p>首先来实现<code>hasKey(key)</code>方法，之所以要实现这个方法，是因为它会被<code>set()</code>和<code>remove()</code>等其他方法调用。可以通过如下代码实现：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">hasKey(key) {
	const res = this.table[this.toStrFn(key)]
  return !isNullOrUndefined(res)
}</code>
        </deckgo-highlight-code><p>JavaScript 只允许我们使用字符串作为对象的键名或属性名。如果传入一个复杂对象作为键，需要将它转化为一个字符串。因此我们需要调用<code>toStrFn</code>函数。如果已经存在一个给定键名的键值对，那么返回<code>true</code>否则返回<code>false</code>。</p><h3>在字典和<code>ValuePair</code>类中设置键和值</h3><p>下面，我们来实现<code>set</code>方法，代码如下：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">set(key, value) {
  if (!isNullOrUndefined(key) &amp;&amp; !isNullOrUndefined(value)) {
    const tableKey = this.toStrFn(key)
    this.table[tableKey] = new ValuePair(key, value)
    return true
  }
  return false
}</code>
        </deckgo-highlight-code><p>该方法接收<code>key</code>和<code>value</code>作为参数，如果<code>key</code>和<code>value</code>不是<code>undefined</code>或<code>null</code>，那么我们获取表示<code>key</code>的字符串，创建一个新的键值对并且将其赋值给<code>table</code>对象上的<code>key</code>属性。如果<code>key</code>和<code>value</code>是合法的，返回<code>true</code>，表示字典可以将键/值对保存下来，否则返回<code>false</code>。</p><p>该方法可以用来添加新的值，或是更新已有的值。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">// ValuePair类定义
class ValuePair {
  constructor(key, value) {
    this.key = key
    this.value = value
  }

  toString() {
    return `[#${this.key}: ${this.value}]`
  }
}</code>
        </deckgo-highlight-code><p>为了在字典中保存<code>value</code>，我们将<code>key</code>转化为了字符串，而为了保存信息的需要，我们同样需要保存原始的<code>key</code>。因此，我们不是只将<code>value</code>保存在字典中，而是要保存两个值：原始的<code>key</code>和<code>value</code>。为了字典能更简单地通过<code>toString()</code>方法输出结果，我们同样要为<code>ValuePair</code>类创建<code>toString()</code>方法。</p><h3>从字典中移除一个值</h3><p>接下来实现<code>remove()</code>方法。它和<code>Set</code>类中的<code>delete</code>方法很相似，唯一的不同在于我们将先搜索<code>key</code>，而不是<code>value</code>。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">remove(key) {
  if (this.hasKey(key)) {
    delete this.table[this.toStrFn(key)]
    return true
  }

  return false
}</code>
        </deckgo-highlight-code><p>然后，可以使用 JavaScript 的<code>delete</code>运算符来从<code>items</code>对象中移除<code>key</code>属性。如果能够将<code>value</code>从字典中移除的话，就返回<code>true</code>，否则将返回<code>false</code>。</p><h3>从字典中检索一个值</h3><p>如果我们想在字典中查找一个特定的<code>key</code>，并检索它的<code>value</code>，可以使用下面的方法。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">get(key) {
  const valuePair = this.table[this.toStrFn(key)]
  return isNullOrUndefined(valuePair) ? undefined : valuePair.value
}

// 或者
get(key) {
	if (this.hasKey(key)) {
    return this.table[this.toStrFn(key)]
  }

  return undefined
}</code>
        </deckgo-highlight-code><p>但是，在第二种方式中，我们会获取两次<code>key</code>的字符串以及访问两次<code>table</code>对象：第一次是在<code>hasKey</code>方法中，第二次是在<code>if</code>语句内。这是个小细节，不过第一种方式消耗更少。</p><h3><code>keys</code>、<code>values</code>和<code>valuePairs</code>方法</h3><p>我们已经给<code>Dictionary</code>类创建了最重要的方法，现在来创建一些很有用的辅助方法。</p><p>下面我们将创建<code>valuePairs</code>方法，它会以数组形式返回字典中的所有<code>valuePair</code>对象。代码如下：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">keyValues() {
  return Object.values(this.table)
}

// 或者
keyValues() {
  const valuePairs = []
  for (const k in this.table) {
    if (this.hasKey(k)) {
      valuePairs.push(this.table[k])
    }
  }
  return valuePairs
}</code>
        </deckgo-highlight-code><blockquote><p>我们不能仅使用<code>for-in</code>语句来迭代<code>table</code>对象的所有属性，还需要使用<code>hasKey()</code>方法，因为对象的原型也会包含对象其他的属性，包括那些在当前数据结构中不需要的属性。</p></blockquote><p>接下来是创建<code>keys</code>方法，该方法返回<code>Dictionary</code>类中用于识别值的所有（原始）键名。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">keys() {
  return this.keyValues().map(valuePair =&gt; valuePair.key)
}</code>
        </deckgo-highlight-code><p>我们将会调用所创建的<code>keyValues()</code>方法来返回一个包含<code>valuePair</code>实例的数组，然后迭代每个<code>valuePair</code>。由于我们只对<code>valuePair</code>的<code>key</code>属性感兴趣，就只返回它的<code>key</code>。</p><p>在上面的代码中，我们使用了<code>Array</code>类中的<code>map</code>方法来迭代每个<code>valuePair</code>。<code>map</code>方法可以将一个<code>value</code>转化为其他值。在本例中，我们将每个<code>valuePair</code>转化为了它的<code>key</code>。</p><p>和<code>keys</code>方法相似，我们还有一个<code>values</code>方法。<code>values</code>方法返回一个字典包含的所有值构成的数组。它的代码和<code>keys</code>方法很相似，只不过不同于返回<code>ValuePair</code>类的<code>key</code>属性，我们返回的<code>value</code>属性。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">values() {
  return this.keyValues().map(valuePair =&gt; valuePair.value)
}</code>
        </deckgo-highlight-code><h3>用<code>forEach</code>迭代字典中的每个键值对</h3><p>到目前为止，我们还没创建一个可以迭代数据结构中每个值的方法。下面给<code>Dictionary</code>类创建一个<code>forEach()</code>方法：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">forEach(callbackFn) {
  const valuePairs = this.keyValues()
  for (let i = 0; i &lt; valuePairs.length; i++) {
    const result = callbackFn(valuePairs[i].key, valuePairs[i].value)
    if (result === false) {
      break
    }
  }
}</code>
        </deckgo-highlight-code><p>首先我们获取字典中所有<code>valuePair</code>构成的数组，然后迭代每个<code>valuePair</code>并执行以参数形式传入<code>forEach</code>方法的<code>callbackFn</code>函数，保存它的结果。如果回调函数函数返回了<code>false</code>，会中断<code>forEach()</code>方法的执行，打断正在迭代<code>valuePairs</code>的<code>for</code>循环。</p><h3><code>clear</code>、<code>size</code>、<code>isEmpty</code>和<code>toString()</code>方法</h3><p><code>size()</code>方法返回字典中的值的个数。我们可以用<code>Object.keys()</code>方法来获取<code>table</code>对象中的所有键名。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">size() {
  return Object.keys(this.table).length
}</code>
        </deckgo-highlight-code><p>我们也可以调用<code>keyValues()</code>方法并返回它所返回的数组长度（<code>return this.keyValues().length</code>）。</p><p>要检验字典是否为空，可以获取它的<code>size</code>看看是否为 0。如果<code>size</code>为零，表示字典为空。<code>isEmpty()</code>方法的实现就使用了这种逻辑。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">isEmpty() {
  return this.size() === 0
}</code>
        </deckgo-highlight-code><p>要清空字典内容，我们只需将一个新对象赋值给<code>table</code>即可。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">clear() {
  this.table = {}
}</code>
        </deckgo-highlight-code><p>最后，可以像下面这样创建<code>toString()</code>方法：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">toString() {
  if (this.isEmpty()) {
    return &#x27;&#x27;
  }
  const valuePairs = this.keyValues()
	return valuePairs.reduce((str, val) =&gt; `${str}, ${val}`, &#x27;&#x27;).slice(2)
}</code>
        </deckgo-highlight-code><p>在<code>toString()</code>方法中，如果字典为空，返回一个空字符串，否则根据<code>valuePair</code>构建字符串。</p><h2>使用<code>Dictionary</code>类</h2><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">const dictionary = new Dictionary()

dictionary.set(&#x27;Gandalf&#x27;, &#x27;gandalf@email.com&#x27;)
dictionary.set(&#x27;John&#x27;, &#x27;johnsnow@email.com&#x27;)
dictionary.set(&#x27;Tyrion&#x27;, &#x27;tyrion@email.com&#x27;)

console.log(dictionary.size())
console.log(dictionary.keys())
console.log(dictionary.values())
console.log(dictionary.get(&#x27;Tyrion&#x27;))

dictionary.remove(&#x27;John&#x27;)

console.log(dictionary.keys())
console.log(dictionary.values())
console.log(dictionary.keyValues())

dictionary.forEach((k, v) =&gt; {
  console.log(&#x27;forEach: &#x27;, `key: ${k}, value: ${v}`)
})</code>
        </deckgo-highlight-code><h1>散列表</h1><p>本节，我们将构造一个<code>HashTable</code>类，也叫<code>HashMap</code>类，它是<code>Dictionary</code>类的一种散列表实现方式。</p><p><strong>散列</strong>算法的作用是尽可能快地在数据结构中找到一个值。在之前的章节中，我们已经知道如果要在数据结构中获得一个值（使用<code>get</code>方法），需要迭代整个数据结构来找到它。如果使用散列函数，就知道值的具体位置，因此能够快速检索到该值。散列函数的作用是给定一个键值，然后返回在表中的地址。</p><p>散列表有一些在计算机科学中应用的例子。因为它是字典的一种实现，所以可以用作关联数组。它也可以用来对数据进行索引。当我们在关系型数据库中创建一个新的表时，一个不错的做法是同时创建一个索引来更快地查询到记录的<code>key</code>。在这种情况下，散列表可以用来保存键和对表中记录的引用。另一个很常见的应用是使用散列表来表示对象。JavaScript 语言内部就是使用散列表来表示每个对象。此时，对象的每个属性和方法被存储为<code>key</code>对象类型，每个<code>key</code>指向对应的对象成员。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h1tatyjm6aj21dk0lmjtu.jpg"/></p><h2>创建散列表</h2><p>我们将使用一个关联数组（对象）来表示我们的数据结构，和我们在<code>Dictionary</code>类中所做的一样。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">class HashTable {
  constructor(toStrFn = defaultToString) {
    this.toStrFn = toStrFn
    this.table = {}
  }
}</code>
        </deckgo-highlight-code><p>然后给类添加一些方法。我们需要给类实现三个基本方法：</p><ul><li><code>put(key, value)</code>：向散列表增加一个新的项（也能更新散列表）。</li><li><code>remove(key)</code>：根据键值从散列表中移除值。</li><li><code>get(key)</code>：返回根据键值检索到特定的值。</li></ul><h3>创建散列函数</h3><p>在实现这三个方法之前，我们首先要实现的第一个方法是散列函数。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">loseloseHashCode(key) {
  if (typeof key === &#x27;number&#x27;) {
    return key
  }
  const tableKey = this.toStrFn(key)
  let hash = 0
  for (let i = 0; i &lt; tableKey.length; i++) {
    hash += tableKey.charCodeAt(i)
  }
  return hash % 37
}

hashCode(key) {
  return this.loseloseHashCode(key)
}</code>
        </deckgo-highlight-code><p><code>hashCode</code>方法简单地调用了<code>loseloseHashCode()</code>方法，将<code>key</code>作为参数传入。</p><h3>将键和值加入散列表</h3><p>现在我们有了自己的<code>hashCode()</code>函数，下面来实现<code>put</code>方法。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">put(key, value) {
  if(!isNullOfUndefined(key) &amp;&amp; !isNullOrUndefined(key)) {
    const position = this.hashCode(key)
    this.table[position] = new ValuePair(key, value)
    return true
  }
  return false
}</code>
        </deckgo-highlight-code><p><code>put</code>方法和<code>Dictionary</code>类中的<code>set</code>方法逻辑相似。我们也可以将其命名为<code>set</code>，但大多数编程语言会在<code>HashTable</code>数据结构中使用<code>put</code>方法，因此我们遵循相同的命名方式。</p><p>首先，检验<code>key</code>和<code>value</code>是否合法。对于给出的<code>key</code>参数，需要用所创建的<code>hashCode()</code>函数在表中找到一个位置。然后，用<code>key</code>和<code>value</code>创建一个<code>ValuePair</code>实例。和<code>Dictionary</code>类相似，我们会为了信息备份将原始的<code>key</code>保存下来。</p><h3>从散列表获取一个值</h3><p>从<code>HashTable</code>实例中获取一个值也很简单。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">get(key) {
  const valuePair = this.table[this.hashCode(key)]
  return isNullOrUndefined(valuePair) ? undefined : valuePair.value
}</code>
        </deckgo-highlight-code><p>首先，我们会用所创建的<code>hashCode()</code>方法获取<code>key</code>参数的位置。该函数会返回对应的位置，我们要做的只是到<code>table</code>数组中对应的位置取到值并返回。</p><blockquote><p><code>HashTable</code>和<code>Dictionary</code>类很相似。不同之处在于在<code>Dictionary</code>类中，我们将<code>valuePair</code>保存在<code>table</code>的<code>key</code>属性中（在它被转化为字符串之后），而在<code>HashTable</code>类中，我们由<code>key(hash)</code>生成一个数，并将<code>valuePair</code>保存在<code>hash</code>位置（或属性）。</p><p>注意：JavaScript 对象表现得很像是一个字典（字符串键和任意类型的值），但是 JavaScript 虚拟机实现有时采用了不同的策略，可以参考这篇<a href="https://v8.dev/blog/fast-properties">v8 文档</a>。</p></blockquote><h3>从散列表移除一个值</h3><p>最后一个要实现的方法就是<code>remove()</code>。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">remove(key) {
  const hash = this.hashCode(key)
  const valuePair = this.table[hash]
  if (!isNullOfUndefined(key)) {
    delete this.table[hash]
    return true
  }
  return false
}</code>
        </deckgo-highlight-code><blockquote><p>除了使用<code>delete</code>运算符，也可以直接将<code>hash</code>位置赋值为<code>null</code>或<code>undefined</code>。</p></blockquote><h2>散列表和散列集合</h2><p>在一些编程语言中，还有一种叫<strong>散列集合</strong>的实现。散列集合由一个集合构成，但是插入、移除或获取元素时，使用的是<code>hashCode()</code>函数。我们可以复用本章所有的代码来实现散列集合，不同之处在于，不再添加键值对，只是插入值而没有键。和集合相似，散列集合只存储不重复的唯一值。</p><h2>处理散列表中的冲突</h2><p>有时候一些键会有相同的散列值。不同的散列值在散列表中对应相同位置的时候，我们称为<strong>冲突</strong>。当这种情况发生时，就需要解决冲突。处理冲突有几种方法：<strong>分离链接</strong>、<strong>线性探查</strong>和<strong>双散列法</strong>。</p><h3>分离链接</h3><p><strong>分离链接</strong>法包括为散列表的每一个位置创建一个链表并将元素存储在里面。它是解决冲突的最简单的方法，但是在<code>HashTable</code>实例之外还需要额外的存储空间。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h1tw8ifomej21em0mo76e.jpg"/></p><p>对于分离链接和线性探查来说，只需要重写三个方法；<code>put</code>、<code>get</code>和<code>remove</code>。这三个方法在每种技术实现中都是不同的。和之前一样，我们来声明<code>HashTableSeparateChaining</code>的基本结构。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">class HashTableSeparateChaining {
  constructor(toStrFn = defaultToString) {
    this.toStrFn = toStrFn
    this.table = {}
  }
}</code>
        </deckgo-highlight-code><p>我们来实现第一个方法，即<code>put</code>方法。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">put(key, value) {
  if (!isNullOrUndefined(key) &amp;&amp; !isNullOrUndefined(value)) {
    const position = this.hashCode(key)
    if (isNullOrUndefined(this.table[position])) {
      this.table[position] = new LinkedList()
    }
    this.table[position].push(new ValuePair(key, value))
    return true
  }

  return false
}</code>
        </deckgo-highlight-code><p>在这个方法中，我们将验证要加入新元素的位置是否已经被占据。如果是第一次向该位置加入元素，我们会在该位置上初始化一个<code>LinkedList</code>类的实例。然后使用链表的<code>push</code>方法向<code>LinkedList</code>实例中添加一个<code>ValuePair</code>实例。</p><p>然后，我们实现<code>get</code>方法，用来获取给定键的值。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">get(key) {
  const position = this.hashCode(key)
  const linkedList = this.table[position]
  if (!isNullOrUndefined(linkedList) &amp;&amp; !linkedList.isEmpty()) {
    let current = linkedList.getHead()
    while (!isNullOrUndefined(current)) {
      if (current.element.key === key) {
        return current.element.value
      }
      current = current.next
    }
  }

  return undefined
}</code>
        </deckgo-highlight-code><p>首先要验证的是在特定位置上是否有元素存在。我们在<code>position</code>位置检索<code>linkedList</code>，并检验是否存在<code>linkedList</code>实例。如果没有，则返回<code>undefined</code>，表示没有找到该值。如果位置上有值存在，则搜索这个链表，看是否有对应的值存储在链表中。</p><p>接下来实现<code>remove()</code>方法，从<code>HashTableSeparateChaining</code>实例中移除一个元素和之前实现<code>remove()</code>方法有一些不同。我们需要从链表中移除一个元素。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">remove(key) {
  const position = this.hashCode(key)
  const linkedList = this.table[position]
  if (!isNullOrUndefined(linkedList) &amp;&amp; !linkedList.isEmpty()) {
    let current = linkedList.getHead()
    while (!isNullOrUndefined(current)) {
      if (current.element.key === key) {
        linkedList.remove(current.element)
        if (linkedList.isEmpty()) {
          // delete this.table[position]
          this.table[position] = undefined
        }
        return true
      }
      current = current.next
    }
  }
  return false
}</code>
        </deckgo-highlight-code><blockquote><p>注意，开发中不鼓励使用<code>delete</code>运算符来删除对象的属性，原因是<code>delete</code>并不保证触发 gc，因此并不会优化性能；此外，对于 V8 引擎而言，通过<code>delete</code>运算符删除对象的属性，会变更其隐藏类，频繁对对象进行<code>delete</code>操作可能导致对象变成一个“慢对象”（属性查询通过字典结构，而非通过隐藏类和描述符数组。见<a href="/articles/front-end/fast-properties-in-v8">文章</a>），使得对象属性的访问性能下降。所以如果不再使用某个对象属性，将其置为<code>undefined</code>是比较好的选择。</p></blockquote><p>在<code>remove()</code>方法中，我们使用和<code>get()</code>方法一样的步骤找到要找的元素。迭代<code>linkedList</code>实例时，如果链表中的<code>current</code>元素就是要找的元素，使用<code>remove()</code>方法将其从链表中移除。然后进行额外验证，如果链表空了，则将散列表该位置设置为<code>undefined</code>。这样搜索一个元素的时候，就可以跳过这个位置了。</p><h3>线性探查</h3><p>另一种解决冲突的方法是<strong>线性探查</strong>。之所以称为线性，是因为它处理冲突的方法是将元素直接存储到表中，而不是在单独的数据结构中。</p><p>当像向表中某个位置添加一个新元素的时候，如果索引为<code>position</code>的位置已经被占据了，就尝试<code>position+1</code>的位置。如果它也被占据，则尝试<code>position+2</code>的位置，以此类推，直到在散列表中找到一个空闲的位置。想象一下，有一个已经包含一些元素的散列表，我们想要添加一个新的键和值。我们计算这个新键的<code>hash</code>，并检查散列表中对应的位置是否被占据。如果没有就将该值添加到正确的位置，如果被占据了，就迭代散列表，直到找到一个空闲的位置。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h1txmmpn9vj21cs0ocju0.jpg"/></p><p>当我们从散列表中移除一个键值对的时候，仅将之前数据结构所实现位置的元素移除是不够的。如果我们仅是移除了元素，就可能在查找有相同<code>hash</code>的其他元素时找到一个空的位置，这会导致算法出现问题。</p><p>线性探查技术分为两种。第一种是<strong>软删除</strong>方法。我们使用一个特殊的值（标记）来表示键值对被删除了（惰性删除或软删除），而不是真的删除它。经过一段时间，散列表被操作过后，我们会得到了一个标记了若干删除位置的散列表。这会逐渐降低散列表的效率，因为搜索键值会随着时间变慢。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h1txte30xej214q0kudi1.jpg"/></p><p>第二种方法需要检验是否有必要将一个或多个元素移动到之前的位置。当搜索一个键的时候，这种方法可以避免找到一个空位置。如果移动元素是必要的，就需要在散列表中挪动键值对。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h1txvhbmlmj214e0towgg.jpg"/></p><p>在线性探查的情况下，我们实现需要重写的三个方法。第一个是<code>put()</code>方法。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">put(key, value) {
  if (!isNullOrUndefined(key) &amp;&amp; !isNullOrUndefined(value)) {
    const position = this.hashCode(key)
    if (isNullOrUndefined(this.table[position])) {
      this.table[position] = new ValuePair(key, value)
    } else {
      let index = position + 1
      while (!isNullOrUndefined(this.table[index])) {
        index++
      }
      this.table[index] = new ValuePair(key, value)
    }
    return true
  }
  return false
}</code>
        </deckgo-highlight-code><blockquote><p>在一些编程语言中，我们需要定义数组的大小。如果使用线性探查的话，需要注意的一个问题是数组的可用位置可能会被用完。当算法到达数组的尾部时，它需要循环回到开头并继续迭代元素。如果必要的话，我们还需要创建一个更大的数组并将元素复制到新数组中。在 JavaScript 中，我们不需要担心这个问题。我们不需要定义数组的大小，因为它可以根据需要自动改变，这是 JavaScript 内置的一个功能。</p></blockquote><p>接下来实现<code>get()</code>方法来获取它们的值。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">get(key) {
  const position = this.hashCode(key)
  if (!isNullOrUndefined(this.table[position])) {
    if (this.table[position].key === key) {
      return this.table[position].value
    }
    let index = position + 1
    while (!isNullOrUndefined(this.table[index]) &amp;&amp; this.table[index].key !== key) {
      index++
    }
    if (!isNullOrUndefined(this.table[index]) &amp;&amp; this.table[index].key === key) {
      return this.table[position].value
    }
  }
  return undefined
}</code>
        </deckgo-highlight-code><p>要获得一个键对应的值，先要确定这个键存在。如果这个键不存在，说明要查找的值不在散列表中，因此可以返回<code>undefined</code>。如果这个键存在，需要检查我们要找的值是否就是原始位置上的值。如果是就返回这个值。如果不是，就在<code>HashTableLinearProbing</code>的下一个位置继续查找，我们会按位置递增的顺序查找散列表上的元素直到找到我们想要的键。</p><p>下面实现<code>remove()</code>方法：</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">remove(key) {
  const position = this.hashCode(key)
  if (!isNullOrUndefined(this.table[position])) {
    if (this.table[position].key === key) {
      this.table[position] = undefined
      this.verifyRemoveSideEffect(key, position)
      return true
    }
    let index = position + 1
    while (!isNullOrUndefined(this.table[index]) &amp;&amp; this.table[index].key === key) {
      this.table[index] = undefined
      this.verifyRemoveSideEffect(key, index)
      return true
    }
  }
  return false
}</code>
        </deckgo-highlight-code><p>在<code>get</code>方法中，当我们找到了要找的<code>key</code>后，返回它的值。在<code>remove()</code>中，我们会从散列表中删除元素。</p><h2>更好的散列函数</h2><p>我们使用的 lose lose 散列函数并不是一个表现良好的散列函数，因为它会产生太多的冲突。一个表现良好的散列函数是由几个方面组成的：插入和检索元素的时间（即性能），以及较低冲突的可能性。</p><p>一个更好的，容易实现的散列函数是<code>djb2</code>。</p><deckgo-highlight-code language="jsx" theme="one-dark">
          <code slot="code">djb2HashCode(key) {
  const tableKey = this.toStrFn(key)
  let hash = 5381
  for (let i = 0; i &lt; tableKey.length; i++) {
    hash = 33 * hash + tableKey.charCodeAt(i)
  }

  return hash % 1013
}</code>
        </deckgo-highlight-code><p>在将键转化为字符串后，<code>djbHashCode</code>方法包括初始化一个<code>hash</code>变量并赋值为一个质数，然后迭代参数<code>key</code>，将<code>hash</code>与 33 相乘，并和当前迭代到的码元的 Unicdoe 码值相加。</p><iframe width="560" height="315" src="https://www.youtube.com/embed/b4b8ktEV4Bg" title="散列算法与安全" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><h1>ES6 <code>Map</code>类</h1><p>ES6 新增了<code>Map</code>类。和我们的<code>Dictionary</code>类不同，ES6 的<code>Map</code>类的<code>values()</code>方法和<code>keys()</code>方法都返回一个迭代器，而不是值或键构成的数组。另一个区别是，我们实现的<code>size()</code>方法返回字典中存储值的个数，ES6 的<code>Map</code>类有一个<code>size</code>属性。</p><p>删除<code>map</code>中的元素可以使用<code>delete()</code>方法。<code>clear()</code>方法会重置<code>map</code>数据结构，与我们在<code>Dictionary</code>类中实现的一样。</p><h1>ES6 <code>WeakMap</code>类和<code>WeakSet</code>类</h1><p>除了<code>Set</code>和<code>Map</code>这两种新的数据结构，ES6 还增加了它们的弱化版本，<code>WeakSet</code>和<code>WeakMap</code>。基本上，<code>Map</code>和<code>Set</code>与其弱化版本的区别是：</p><ul><li><code>WeakSet</code>或<code>WeakMap</code>类没有<code>entries()</code>、<code>keys()</code>或<code>values()</code>等方法；</li><li>只能用对象作为键。</li></ul><p>创建和使用这两个类主要是为了性能。<code>WeakSet</code>和<code>WeakMap</code>是弱化的（用对象作为键），没有强引用的键。这是的 JavaScript 的垃圾回收器可以从中清除整个入口。</p><p>另一个优点是，必须用键才可以取出值。这些类没有迭代器方法，因此除非你知道键，否则没有办法取出值。使用<code>WeakMap</code>类可以封装 ES6 类的私有属性。</p><p><code>WeakMap</code>类也可以使用<code>set()</code>方法，但是不能使用除了对象以外的类型。</p><h1>小结</h1><p>本章介绍了字典相关的知识，了解了如何添加、移除和获取元素以及其他一些方法。还了解了字典和集合的不同之处。</p><p>我们也学习了散列运算，怎样创建一个散列表数据结构，如何添加、移动和获取元素，以及如何创建散列函数。还了解了如何使用两种不同的方法解决散列表中的冲突问题，分离链接和线性探查。</p></article><div class="foot-post-navigator"><button class="previous " style="visibility:visible"><div><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span>上一篇</div><span>Vercel简介 静态博客部署</span></button><button class="next " style="visibility:visible"><div>下一篇<span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></div><span>（十）树</span></button></div><div id="commentBoxScript"></div></main></main><div class="table-of-content"><div class="table-of-content-header"></div><div class="table-of-content-main"></div></div><div class="table-of-content-switch"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg></div></main><footer class="footer"><div class="wrapper"><div><h3>Thanks for reading!</h3><p>CopyRight © 2022 Louis K - Present</p></div><div><p style="font-size:1.3rem"><span><span role="img" aria-label="wechat" class="anticon anticon-wechat"><svg viewBox="64 64 896 896" focusable="false" data-icon="wechat" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z"></path></svg></span></span><span><span role="img" aria-label="qq-circle" class="anticon anticon-qq-circle"><svg viewBox="64 64 896 896" focusable="false" data-icon="qq-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm210.5 612.4c-11.5 1.4-44.9-52.7-44.9-52.7 0 31.3-16.2 72.2-51.1 101.8 16.9 5.2 54.9 19.2 45.9 34.4-7.3 12.3-125.6 7.9-159.8 4-34.2 3.8-152.5 8.3-159.8-4-9.1-15.2 28.9-29.2 45.8-34.4-35-29.5-51.1-70.4-51.1-101.8 0 0-33.4 54.1-44.9 52.7-5.4-.7-12.4-29.6 9.4-99.7 10.3-33 22-60.5 40.2-105.8-3.1-116.9 45.3-215 160.4-215 113.9 0 163.3 96.1 160.4 215 18.1 45.2 29.9 72.8 40.2 105.8 21.7 70.1 14.6 99.1 9.3 99.7z"></path></svg></span></span><span><a href="mailto:k1664032884@gmail.com"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-80.8 108.9L531.7 514.4c-7.8 6.1-18.7 6.1-26.5 0L189.6 268.9A7.2 7.2 0 01194 256h648.8a7.2 7.2 0 014.4 12.9z"></path></svg></span></a></span><span><a href="https://github.com/kqhasaki" target="_blank" rel="noopener noreferrer"><span role="img" aria-label="github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></span></a></span></p></div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/javascript-algorithm-and-data-structure/javascript-algorithm-series08";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a6a9e8476add1045c345.js"],"app":["/app-cb8cf455a629701e7063.js"],"component---src-pages-404-js":["/component---src-pages-404-js-8f4b283686f95500832f.js"],"component---src-pages-about-js":["/component---src-pages-about-js-802e58d1b7358e2b6a67.js"],"component---src-pages-non-tech-js":["/component---src-pages-non-tech-js-89e7bc9937558a205dc4.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-73a188e2a6f7327575df.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-9d4b15df0cdbe7fceee1.js"]};/*]]>*/</script><script src="/polyfill-a6a9e8476add1045c345.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-9d4b15df0cdbe7fceee1.js" async=""></script><script src="/commons-62d414c82abc9b4aa190.js" async=""></script><script src="/cb1608f2-cc8649749445c1088879.js" async=""></script><script src="/app-cb8cf455a629701e7063.js" async=""></script><script src="/framework-f27b074ecebec0f1dbc4.js" async=""></script><script src="/webpack-runtime-768047f354bc004d166d.js" async=""></script></body></html>